<%- include('../partials/header.ejs', {subPage: false, isLogin: isLogin}) %> 
<div class="container">
  <% if (isLogin) {%>
    <h1>Home Page of <%= user.name%></h1>
    <form action="/u/<%= user._id%>/?_method=put" method="POST">
        <div class="row form-group">
            <label for="name" class="col-sm-2 col-form-label col-form-label-lg">UserName:</label>
            <div class="col-sm-10">
            <input type="text" class="form-control form-control-lg" id="name" name="name" pattern="^\S+$" placeholder="cannot contain spaces" value="<%=user.name%>" required <% if (!edit) {%> disabled readonly<% } %>  >
            </div>
        </div>
        <% if (edit) { %> 
          <button type="submit" class="btn btn-primary">Save</button>
        <% } %> 
        <% if (!edit) { %> <a href="/u/home/edit" class="btn btn-secondary">Edit Profile</a> <% } %> 
    </form>
    <% if (edit) { %>
      <form action="/u/<%= user._id%>/?_method=DELETE" method="POST" class="my-2">
        <button type="submit" value="delete" class="btn btn-danger">Delete</button>
      </form>
    <% } %> 

    <h2>Total User Posts: <%= user.posts.length %> </h2>
        
    <% } else { %> 
      <div class="row my-5">
        <h1>Sign in</h1>
        <a class="button google" href="/u/google">Sign in with Google</a>
      </div>
      <% } %> 
      <div class="row">
        <% if (isLogin) {%> 
        <form action="/u/logout" method="POST" class="d-inline col-1">
          <input type="submit" value="LOG OUT" class="btn btn-danger" />
        </form><% } %> 
        <div class="col-1">
          <a href="/r/all" class="btn btn-secondary">Cancel</a>
        </div>
      </div>
  </div>

  
  
  
  